{"ast":null,"code":"import { GoogleGenerativeAI } from '@google/generative-ai';\nclass GeminiService {\n  constructor() {\n    this.apiKey = 'AIzaSyB7p9oN5NVm30Aqhpn4f0hCccsz7NIlOa4';\n    this.genAI = new GoogleGenerativeAI(this.apiKey);\n    this.model = this.genAI.getGenerativeModel({\n      model: 'gemini-1.5-flash'\n    });\n  }\n  async summarizeNews(newsContent) {\n    try {\n      const prompt = `\nPlease analyze the following news article and provide a concise summary with key points:\n\nArticle: ${newsContent}\n\nPlease provide:\n1. A brief 2-3 sentence summary\n2. 3-5 key points in bullet format\n3. Main entities involved (people, organizations, locations)\n\nFormat your response as JSON with the following structure:\n{\n  \"summary\": \"Brief summary here\",\n  \"keyPoints\": [\"Point 1\", \"Point 2\", \"Point 3\"],\n  \"entities\": [\"Entity 1\", \"Entity 2\", \"Entity 3\"]\n}\n`;\n      const result = await this.model.generateContent(prompt);\n      const response = await result.response;\n      const text = response.text();\n\n      // Try to parse JSON response\n      try {\n        const jsonMatch = text.match(/\\{[\\s\\S]*\\}/);\n        if (jsonMatch) {\n          return JSON.parse(jsonMatch[0]);\n        }\n      } catch (parseError) {\n        console.warn('Failed to parse JSON response, using fallback format');\n      }\n\n      // Fallback: create structured response from plain text\n      return this.parseTextResponse(text);\n    } catch (error) {\n      console.error('Error summarizing news:', error);\n      throw new Error('Failed to generate summary. Please try again.');\n    }\n  }\n  parseTextResponse(text) {\n    // Fallback parser for non-JSON responses\n    const lines = text.split('\\n').filter(line => line.trim());\n    let summary = '';\n    const keyPoints = [];\n    const entities = [];\n    let currentSection = 'summary';\n    for (const line of lines) {\n      const trimmedLine = line.trim();\n      if (trimmedLine.toLowerCase().includes('key points') || trimmedLine.toLowerCase().includes('main points')) {\n        currentSection = 'keyPoints';\n        continue;\n      }\n      if (trimmedLine.toLowerCase().includes('entities') || trimmedLine.toLowerCase().includes('people') || trimmedLine.toLowerCase().includes('organizations')) {\n        currentSection = 'entities';\n        continue;\n      }\n      if (currentSection === 'summary' && trimmedLine.length > 20) {\n        summary += (summary ? ' ' : '') + trimmedLine;\n      } else if (currentSection === 'keyPoints' && (trimmedLine.startsWith('-') || trimmedLine.startsWith('•') || trimmedLine.match(/^\\d+\\./))) {\n        keyPoints.push(trimmedLine.replace(/^[-•\\d\\.\\s]+/, ''));\n      } else if (currentSection === 'entities' && trimmedLine.length > 2) {\n        entities.push(trimmedLine.replace(/^[-•\\d\\.\\s]+/, ''));\n      }\n    }\n    return {\n      summary: summary || 'Summary not available',\n      keyPoints: keyPoints.length > 0 ? keyPoints : ['Key points not available'],\n      entities: entities.length > 0 ? entities : ['Entities not identified']\n    };\n  }\n  async summarizeByUrl(url) {\n    try {\n      // For URL-based summarization, we'll need to fetch the content first\n      // This is a simplified version - in production, you'd want proper web scraping\n      const prompt = `\nPlease provide a summary for the news article at this URL: ${url}\n\nSince I cannot directly access the URL, please provide a general response about how to summarize news articles and what key elements to look for.\n\nFormat as JSON:\n{\n  \"summary\": \"Brief explanation\",\n  \"keyPoints\": [\"Point 1\", \"Point 2\"],\n  \"entities\": [\"General guidance\"]\n}\n`;\n      const result = await this.model.generateContent(prompt);\n      const response = await result.response;\n      const text = response.text();\n      try {\n        const jsonMatch = text.match(/\\{[\\s\\S]*\\}/);\n        if (jsonMatch) {\n          return JSON.parse(jsonMatch[0]);\n        }\n      } catch (parseError) {\n        console.warn('Failed to parse JSON response for URL');\n      }\n      return {\n        summary: 'URL-based summarization requires content extraction',\n        keyPoints: ['Please provide article text for detailed analysis'],\n        entities: ['Content extraction needed']\n      };\n    } catch (error) {\n      console.error('Error summarizing URL:', error);\n      throw new Error('Failed to process URL. Please try with article text.');\n    }\n  }\n}\nexport default new GeminiService();","map":{"version":3,"names":["GoogleGenerativeAI","GeminiService","constructor","apiKey","genAI","model","getGenerativeModel","summarizeNews","newsContent","prompt","result","generateContent","response","text","jsonMatch","match","JSON","parse","parseError","console","warn","parseTextResponse","error","Error","lines","split","filter","line","trim","summary","keyPoints","entities","currentSection","trimmedLine","toLowerCase","includes","length","startsWith","push","replace","summarizeByUrl","url"],"sources":["D:/Capstoneprojectai/Newsapp/NewsHub/src/services/geminiService.js"],"sourcesContent":["import { GoogleGenerativeAI } from '@google/generative-ai';\n\nclass GeminiService {\n  constructor() {\n    this.apiKey = 'AIzaSyB7p9oN5NVm30Aqhpn4f0hCccsz7NIlOa4';\n    this.genAI = new GoogleGenerativeAI(this.apiKey);\n    this.model = this.genAI.getGenerativeModel({ model: 'gemini-1.5-flash' });\n  }\n\n  async summarizeNews(newsContent) {\n    try {\n      const prompt = `\nPlease analyze the following news article and provide a concise summary with key points:\n\nArticle: ${newsContent}\n\nPlease provide:\n1. A brief 2-3 sentence summary\n2. 3-5 key points in bullet format\n3. Main entities involved (people, organizations, locations)\n\nFormat your response as JSON with the following structure:\n{\n  \"summary\": \"Brief summary here\",\n  \"keyPoints\": [\"Point 1\", \"Point 2\", \"Point 3\"],\n  \"entities\": [\"Entity 1\", \"Entity 2\", \"Entity 3\"]\n}\n`;\n\n      const result = await this.model.generateContent(prompt);\n      const response = await result.response;\n      const text = response.text();\n      \n      // Try to parse JSON response\n      try {\n        const jsonMatch = text.match(/\\{[\\s\\S]*\\}/);\n        if (jsonMatch) {\n          return JSON.parse(jsonMatch[0]);\n        }\n      } catch (parseError) {\n        console.warn('Failed to parse JSON response, using fallback format');\n      }\n      \n      // Fallback: create structured response from plain text\n      return this.parseTextResponse(text);\n      \n    } catch (error) {\n      console.error('Error summarizing news:', error);\n      throw new Error('Failed to generate summary. Please try again.');\n    }\n  }\n\n  parseTextResponse(text) {\n    // Fallback parser for non-JSON responses\n    const lines = text.split('\\n').filter(line => line.trim());\n    \n    let summary = '';\n    const keyPoints = [];\n    const entities = [];\n    \n    let currentSection = 'summary';\n    \n    for (const line of lines) {\n      const trimmedLine = line.trim();\n      \n      if (trimmedLine.toLowerCase().includes('key points') || \n          trimmedLine.toLowerCase().includes('main points')) {\n        currentSection = 'keyPoints';\n        continue;\n      }\n      \n      if (trimmedLine.toLowerCase().includes('entities') || \n          trimmedLine.toLowerCase().includes('people') ||\n          trimmedLine.toLowerCase().includes('organizations')) {\n        currentSection = 'entities';\n        continue;\n      }\n      \n      if (currentSection === 'summary' && trimmedLine.length > 20) {\n        summary += (summary ? ' ' : '') + trimmedLine;\n      } else if (currentSection === 'keyPoints' && \n                 (trimmedLine.startsWith('-') || trimmedLine.startsWith('•') || \n                  trimmedLine.match(/^\\d+\\./))) {\n        keyPoints.push(trimmedLine.replace(/^[-•\\d\\.\\s]+/, ''));\n      } else if (currentSection === 'entities' && trimmedLine.length > 2) {\n        entities.push(trimmedLine.replace(/^[-•\\d\\.\\s]+/, ''));\n      }\n    }\n    \n    return {\n      summary: summary || 'Summary not available',\n      keyPoints: keyPoints.length > 0 ? keyPoints : ['Key points not available'],\n      entities: entities.length > 0 ? entities : ['Entities not identified']\n    };\n  }\n\n  async summarizeByUrl(url) {\n    try {\n      // For URL-based summarization, we'll need to fetch the content first\n      // This is a simplified version - in production, you'd want proper web scraping\n      const prompt = `\nPlease provide a summary for the news article at this URL: ${url}\n\nSince I cannot directly access the URL, please provide a general response about how to summarize news articles and what key elements to look for.\n\nFormat as JSON:\n{\n  \"summary\": \"Brief explanation\",\n  \"keyPoints\": [\"Point 1\", \"Point 2\"],\n  \"entities\": [\"General guidance\"]\n}\n`;\n\n      const result = await this.model.generateContent(prompt);\n      const response = await result.response;\n      const text = response.text();\n      \n      try {\n        const jsonMatch = text.match(/\\{[\\s\\S]*\\}/);\n        if (jsonMatch) {\n          return JSON.parse(jsonMatch[0]);\n        }\n      } catch (parseError) {\n        console.warn('Failed to parse JSON response for URL');\n      }\n      \n      return {\n        summary: 'URL-based summarization requires content extraction',\n        keyPoints: ['Please provide article text for detailed analysis'],\n        entities: ['Content extraction needed']\n      };\n      \n    } catch (error) {\n      console.error('Error summarizing URL:', error);\n      throw new Error('Failed to process URL. Please try with article text.');\n    }\n  }\n}\n\nexport default new GeminiService();"],"mappings":"AAAA,SAASA,kBAAkB,QAAQ,uBAAuB;AAE1D,MAAMC,aAAa,CAAC;EAClBC,WAAWA,CAAA,EAAG;IACZ,IAAI,CAACC,MAAM,GAAG,yCAAyC;IACvD,IAAI,CAACC,KAAK,GAAG,IAAIJ,kBAAkB,CAAC,IAAI,CAACG,MAAM,CAAC;IAChD,IAAI,CAACE,KAAK,GAAG,IAAI,CAACD,KAAK,CAACE,kBAAkB,CAAC;MAAED,KAAK,EAAE;IAAmB,CAAC,CAAC;EAC3E;EAEA,MAAME,aAAaA,CAACC,WAAW,EAAE;IAC/B,IAAI;MACF,MAAMC,MAAM,GAAG;AACrB;AACA;AACA,WAAWD,WAAW;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;MAEK,MAAME,MAAM,GAAG,MAAM,IAAI,CAACL,KAAK,CAACM,eAAe,CAACF,MAAM,CAAC;MACvD,MAAMG,QAAQ,GAAG,MAAMF,MAAM,CAACE,QAAQ;MACtC,MAAMC,IAAI,GAAGD,QAAQ,CAACC,IAAI,CAAC,CAAC;;MAE5B;MACA,IAAI;QACF,MAAMC,SAAS,GAAGD,IAAI,CAACE,KAAK,CAAC,aAAa,CAAC;QAC3C,IAAID,SAAS,EAAE;UACb,OAAOE,IAAI,CAACC,KAAK,CAACH,SAAS,CAAC,CAAC,CAAC,CAAC;QACjC;MACF,CAAC,CAAC,OAAOI,UAAU,EAAE;QACnBC,OAAO,CAACC,IAAI,CAAC,sDAAsD,CAAC;MACtE;;MAEA;MACA,OAAO,IAAI,CAACC,iBAAiB,CAACR,IAAI,CAAC;IAErC,CAAC,CAAC,OAAOS,KAAK,EAAE;MACdH,OAAO,CAACG,KAAK,CAAC,yBAAyB,EAAEA,KAAK,CAAC;MAC/C,MAAM,IAAIC,KAAK,CAAC,+CAA+C,CAAC;IAClE;EACF;EAEAF,iBAAiBA,CAACR,IAAI,EAAE;IACtB;IACA,MAAMW,KAAK,GAAGX,IAAI,CAACY,KAAK,CAAC,IAAI,CAAC,CAACC,MAAM,CAACC,IAAI,IAAIA,IAAI,CAACC,IAAI,CAAC,CAAC,CAAC;IAE1D,IAAIC,OAAO,GAAG,EAAE;IAChB,MAAMC,SAAS,GAAG,EAAE;IACpB,MAAMC,QAAQ,GAAG,EAAE;IAEnB,IAAIC,cAAc,GAAG,SAAS;IAE9B,KAAK,MAAML,IAAI,IAAIH,KAAK,EAAE;MACxB,MAAMS,WAAW,GAAGN,IAAI,CAACC,IAAI,CAAC,CAAC;MAE/B,IAAIK,WAAW,CAACC,WAAW,CAAC,CAAC,CAACC,QAAQ,CAAC,YAAY,CAAC,IAChDF,WAAW,CAACC,WAAW,CAAC,CAAC,CAACC,QAAQ,CAAC,aAAa,CAAC,EAAE;QACrDH,cAAc,GAAG,WAAW;QAC5B;MACF;MAEA,IAAIC,WAAW,CAACC,WAAW,CAAC,CAAC,CAACC,QAAQ,CAAC,UAAU,CAAC,IAC9CF,WAAW,CAACC,WAAW,CAAC,CAAC,CAACC,QAAQ,CAAC,QAAQ,CAAC,IAC5CF,WAAW,CAACC,WAAW,CAAC,CAAC,CAACC,QAAQ,CAAC,eAAe,CAAC,EAAE;QACvDH,cAAc,GAAG,UAAU;QAC3B;MACF;MAEA,IAAIA,cAAc,KAAK,SAAS,IAAIC,WAAW,CAACG,MAAM,GAAG,EAAE,EAAE;QAC3DP,OAAO,IAAI,CAACA,OAAO,GAAG,GAAG,GAAG,EAAE,IAAII,WAAW;MAC/C,CAAC,MAAM,IAAID,cAAc,KAAK,WAAW,KAC7BC,WAAW,CAACI,UAAU,CAAC,GAAG,CAAC,IAAIJ,WAAW,CAACI,UAAU,CAAC,GAAG,CAAC,IAC1DJ,WAAW,CAAClB,KAAK,CAAC,QAAQ,CAAC,CAAC,EAAE;QACxCe,SAAS,CAACQ,IAAI,CAACL,WAAW,CAACM,OAAO,CAAC,cAAc,EAAE,EAAE,CAAC,CAAC;MACzD,CAAC,MAAM,IAAIP,cAAc,KAAK,UAAU,IAAIC,WAAW,CAACG,MAAM,GAAG,CAAC,EAAE;QAClEL,QAAQ,CAACO,IAAI,CAACL,WAAW,CAACM,OAAO,CAAC,cAAc,EAAE,EAAE,CAAC,CAAC;MACxD;IACF;IAEA,OAAO;MACLV,OAAO,EAAEA,OAAO,IAAI,uBAAuB;MAC3CC,SAAS,EAAEA,SAAS,CAACM,MAAM,GAAG,CAAC,GAAGN,SAAS,GAAG,CAAC,0BAA0B,CAAC;MAC1EC,QAAQ,EAAEA,QAAQ,CAACK,MAAM,GAAG,CAAC,GAAGL,QAAQ,GAAG,CAAC,yBAAyB;IACvE,CAAC;EACH;EAEA,MAAMS,cAAcA,CAACC,GAAG,EAAE;IACxB,IAAI;MACF;MACA;MACA,MAAMhC,MAAM,GAAG;AACrB,6DAA6DgC,GAAG;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;MAEK,MAAM/B,MAAM,GAAG,MAAM,IAAI,CAACL,KAAK,CAACM,eAAe,CAACF,MAAM,CAAC;MACvD,MAAMG,QAAQ,GAAG,MAAMF,MAAM,CAACE,QAAQ;MACtC,MAAMC,IAAI,GAAGD,QAAQ,CAACC,IAAI,CAAC,CAAC;MAE5B,IAAI;QACF,MAAMC,SAAS,GAAGD,IAAI,CAACE,KAAK,CAAC,aAAa,CAAC;QAC3C,IAAID,SAAS,EAAE;UACb,OAAOE,IAAI,CAACC,KAAK,CAACH,SAAS,CAAC,CAAC,CAAC,CAAC;QACjC;MACF,CAAC,CAAC,OAAOI,UAAU,EAAE;QACnBC,OAAO,CAACC,IAAI,CAAC,uCAAuC,CAAC;MACvD;MAEA,OAAO;QACLS,OAAO,EAAE,qDAAqD;QAC9DC,SAAS,EAAE,CAAC,mDAAmD,CAAC;QAChEC,QAAQ,EAAE,CAAC,2BAA2B;MACxC,CAAC;IAEH,CAAC,CAAC,OAAOT,KAAK,EAAE;MACdH,OAAO,CAACG,KAAK,CAAC,wBAAwB,EAAEA,KAAK,CAAC;MAC9C,MAAM,IAAIC,KAAK,CAAC,sDAAsD,CAAC;IACzE;EACF;AACF;AAEA,eAAe,IAAItB,aAAa,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}